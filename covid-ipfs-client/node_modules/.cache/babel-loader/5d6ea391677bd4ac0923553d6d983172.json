{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport \"antd/es/spin/style\";\nimport _Spin from \"antd/es/spin\";\nimport \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"tableClassName\", \"action\", \"tableColumn\", \"type\", \"pagination\", \"rowSelection\", \"size\", \"defaultSize\", \"tableStyle\", \"toolbarDom\", \"searchNode\", \"style\", \"cardProps\", \"alertDom\", \"name\", \"onSortChange\", \"onFilterChange\", \"options\", \"isLightFilter\", \"className\", \"cardBordered\", \"editableUtils\", \"getRowKey\"],\n    _excluded2 = [\"cardBordered\", \"request\", \"className\", \"params\", \"defaultData\", \"headerTitle\", \"postData\", \"ghost\", \"pagination\", \"actionRef\", \"columns\", \"toolBarRender\", \"onLoad\", \"onRequestError\", \"style\", \"cardProps\", \"tableStyle\", \"tableClassName\", \"columnsStateMap\", \"onColumnsStateChange\", \"options\", \"search\", \"name\", \"onLoadingChange\", \"rowSelection\", \"beforeSearchSubmit\", \"tableAlertRender\", \"defaultClassName\", \"formRef\", \"type\", \"columnEmptyText\", \"toolbar\", \"rowKey\", \"manualRequest\", \"polling\", \"tooltip\"];\n/* eslint max-classes-per-file: [\"error\", 3] */\n\nimport ProCard from '@ant-design/pro-card';\nimport ProForm from '@ant-design/pro-form';\nimport { ConfigProviderWrap, useIntl } from '@ant-design/pro-provider';\nimport { editableRowByKey, ErrorBoundary, omitUndefined, recordKeyToString, useDeepCompareEffect, useDeepCompareEffectDebounce, useEditableArray, useMountMergeState } from '@ant-design/pro-utils';\nimport classNames from 'classnames';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport Alert from './components/Alert';\nimport FormRender from './components/Form';\nimport Toolbar from './components/ToolBar';\nimport Container from './container';\nimport './index.less';\nimport useFetchData from './useFetchData';\nimport { genColumnKey, isBordered, mergePagination, parseDefaultColumnConfig, useActionType } from './utils';\nimport { columnSort } from './utils/columnSort';\nimport { genProColumnToColumn } from './utils/genProColumnToColumn';\n\nfunction TableRender(props) {\n  var rowKey = props.rowKey,\n      tableClassName = props.tableClassName,\n      action = props.action,\n      tableColumns = props.tableColumn,\n      type = props.type,\n      pagination = props.pagination,\n      rowSelection = props.rowSelection,\n      size = props.size,\n      defaultSize = props.defaultSize,\n      tableStyle = props.tableStyle,\n      toolbarDom = props.toolbarDom,\n      searchNode = props.searchNode,\n      style = props.style,\n      cardProps = props.cardProps,\n      alertDom = props.alertDom,\n      name = props.name,\n      onSortChange = props.onSortChange,\n      onFilterChange = props.onFilterChange,\n      options = props.options,\n      isLightFilter = props.isLightFilter,\n      className = props.className,\n      cardBordered = props.cardBordered,\n      editableUtils = props.editableUtils,\n      getRowKey = props.getRowKey,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var counter = Container.useContainer();\n  /** ÈúÄË¶ÅÈÅçÂéÜ‰∏Ä‰∏ãÔºå‰∏çÁÑ∂‰∏çÊîØÊåÅÂµåÂ•óË°®Ê†º */\n\n  var columns = useMemo(function () {\n    var loopFilter = function loopFilter(column) {\n      return column.map(function (item) {\n        // Âà†Êéâ‰∏çÂ∫îËØ•ÊòæÁ§∫ÁöÑ\n        var columnKey = genColumnKey(item.key, item.index);\n        var config = counter.columnsMap[columnKey];\n\n        if (config && config.show === false) {\n          return false;\n        }\n\n        if (item.children) {\n          return _objectSpread(_objectSpread({}, item), {}, {\n            children: loopFilter(item.children)\n          });\n        }\n\n        return item;\n      }).filter(Boolean);\n    };\n\n    return loopFilter(tableColumns);\n  }, [counter.columnsMap, tableColumns]);\n  /** Â¶ÇÊûúÊâÄÊúâÂàó‰∏≠ÁöÑ filters=true| undefined ËØ¥ÊòéÊòØÁî®ÁöÑÊòØÊú¨Âú∞Á≠õÈÄâ ‰ªª‰Ωï‰∏ÄÂàóÈÖçÁΩÆ filters=falseÔºåÂ∞±ËÉΩÁªïËøáËøô‰∏™Âà§Êñ≠ */\n\n  var useLocaleFilter = useMemo(function () {\n    return columns === null || columns === void 0 ? void 0 : columns.every(function (column) {\n      return column.filters === true && column.onFilter === true || column.filters === undefined && column.onFilter === undefined;\n    });\n  }, [columns]);\n  /**\n   * Â¶ÇÊûúÊòØÂàÜÈ°µÁöÑÊñ∞Â¢ûÔºåÊÄªÊòØÂä†Âà∞ÊúÄÂêé‰∏ÄË°å\n   *\n   * @returns\n   */\n\n  var editableDataSource = function editableDataSource(dataSource) {\n    var _ref = editableUtils.newLineRecord || {},\n        newLineOptions = _ref.options,\n        row = _ref.defaultValue;\n\n    if (newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.parentKey) {\n      var _recordKeyToString, _props$expandable;\n\n      var actionProps = {\n        data: dataSource,\n        getRowKey: getRowKey,\n        row: _objectSpread(_objectSpread({}, row), {}, {\n          map_row_parentKey: (_recordKeyToString = recordKeyToString(newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.parentKey)) === null || _recordKeyToString === void 0 ? void 0 : _recordKeyToString.toString()\n        }),\n        key: newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.recordKey,\n        childrenColumnName: ((_props$expandable = props.expandable) === null || _props$expandable === void 0 ? void 0 : _props$expandable.childrenColumnName) || 'children'\n      };\n      return editableRowByKey(actionProps, newLineOptions.position === 'top' ? 'top' : 'update');\n    }\n\n    if ((newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.position) === 'top') {\n      return [row].concat(_toConsumableArray(action.dataSource));\n    } // Â¶ÇÊûúÊúâÂàÜÈ°µÁöÑÂäüËÉΩÔºåÊàë‰ª¨Âä†Âà∞Ëøô‰∏ÄÈ°µÁöÑÊú´Â∞æ\n\n\n    if (pagination && (pagination === null || pagination === void 0 ? void 0 : pagination.current) && (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize)) {\n      var newDataSource = _toConsumableArray(action.dataSource);\n\n      if ((pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) > newDataSource.length) {\n        newDataSource.push(row);\n        return newDataSource;\n      }\n\n      newDataSource.splice((pagination === null || pagination === void 0 ? void 0 : pagination.current) * (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) - 1, 0, row);\n      return newDataSource;\n    }\n\n    return [].concat(_toConsumableArray(action.dataSource), [row]);\n  };\n\n  var getTableProps = function getTableProps() {\n    return _objectSpread(_objectSpread({}, rest), {}, {\n      size: size,\n      rowSelection: rowSelection === false ? undefined : rowSelection,\n      className: tableClassName,\n      style: tableStyle,\n      columns: columns.map(function (item) {\n        return item.isExtraColumns ? item.extraColumn : item;\n      }),\n      loading: action.loading,\n      dataSource: editableUtils.newLineRecord ? editableDataSource(action.dataSource) : action.dataSource,\n      pagination: pagination,\n      onChange: function onChange(changePagination, filters, sorter, extra) {\n        var _rest$onChange;\n\n        (_rest$onChange = rest.onChange) === null || _rest$onChange === void 0 ? void 0 : _rest$onChange.call(rest, changePagination, filters, sorter, extra);\n\n        if (!useLocaleFilter) {\n          onFilterChange(omitUndefined(filters));\n        } // Âà∂ÈÄ†Á≠õÈÄâÁöÑÊï∞ÊçÆ\n        // Âà∂ÈÄ†‰∏Ä‰∏™ÊéíÂ∫èÁöÑÊï∞ÊçÆ\n\n\n        if (Array.isArray(sorter)) {\n          var data = sorter.reduce(function (pre, value) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, \"\".concat(value.field), value.order));\n          }, {});\n          onSortChange(omitUndefined(data));\n        } else {\n          var _sorter$column;\n\n          var sorterOfColumn = (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter;\n          var isSortByField = (sorterOfColumn === null || sorterOfColumn === void 0 ? void 0 : sorterOfColumn.toString()) === sorterOfColumn;\n          onSortChange(omitUndefined(_defineProperty({}, \"\".concat(isSortByField ? sorterOfColumn : sorter.field), sorter.order)) || {});\n        }\n      }\n    });\n  };\n  /** ÈªòËÆ§ÁöÑ table domÔºåÂ¶ÇÊûúÊòØÁºñËæëÊ®°ÂºèÔºåÂ§ñÈù¢ËøòË¶ÅÂåÖ‰∏™ form */\n\n\n  var baseTableDom = /*#__PURE__*/React.createElement(_Table, _extends({}, getTableProps(), {\n    rowKey: rowKey\n  }));\n  /** Ëá™ÂÆö‰πâÁöÑ render */\n\n  var tableDom = props.tableViewRender ? props.tableViewRender(_objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowSelection: rowSelection !== false ? rowSelection : undefined\n  }), baseTableDom) : baseTableDom;\n  useMemo(function () {\n    // Â¶ÇÊûúÂ∏¶‰∫ÜnameÔºåËØ¥ÊòéË¶ÅÁî®Ëá™Â∏¶ÁöÑ formÔºåÈúÄË¶ÅËÆæÁΩÆ‰∏Ä‰∏ã„ÄÇ\n    if (props.name && props.editable) {\n      counter.setEditorTableForm(props.editable.form);\n    }\n  }, [counter, props.editable, props.name]);\n  var tableContentDom = useMemo(function () {\n    if (props.editable && !props.name) {\n      var _props$editable, _props$editable2;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, toolbarDom, alertDom, /*#__PURE__*/React.createElement(ProForm, _extends({\n        onInit: function onInit(_, form) {\n          counter.setEditorTableForm(form);\n        } // @ts-ignore\n        ,\n        formRef: function formRef(form) {\n          counter.setEditorTableForm(form);\n        }\n      }, (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.formProps, {\n        component: false,\n        form: (_props$editable2 = props.editable) === null || _props$editable2 === void 0 ? void 0 : _props$editable2.form,\n        onValuesChange: editableUtils.onValuesChange,\n        key: \"table\",\n        submitter: false,\n        omitNil: false,\n        dateFormatter: props.dateFormatter,\n        contentRender: function contentRender(items) {\n          if (counter.editableForm) return items;\n          if (props.loading === false) return;\n          var loadingProps = props.loading === true ? {} : props.loading;\n          return /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              paddingTop: 100,\n              textAlign: 'center'\n            }\n          }, /*#__PURE__*/React.createElement(_Spin, _extends({\n            size: \"large\"\n          }, loadingProps)));\n        }\n      }), tableDom));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, toolbarDom, alertDom, counter.editableForm || !props.editable ? tableDom : null); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [alertDom, props.loading, !!props.editable, tableDom, toolbarDom]);\n  /** Table Âå∫ÂüüÁöÑ domÔºå‰∏∫‰∫ÜÊñπ‰æø render */\n\n  var tableAreaDom = // cardProps ÊàñËÄÖ Êúâ‰∫Üname Â∞±‰∏çÈúÄË¶ÅËøô‰∏™padding‰∫ÜÔºå‰∏çÁÑ∂‰ºöÂØºËá¥‰∏çÂ•ΩÂØπÂÖ∂\n  cardProps === false || !!props.name ? tableContentDom : /*#__PURE__*/React.createElement(ProCard, _extends({\n    ghost: props.ghost,\n    bordered: isBordered('table', cardBordered),\n    bodyStyle: toolbarDom ? {\n      paddingTop: 0\n    } : {\n      padding: 0\n    }\n  }, cardProps), tableContentDom);\n\n  var renderTable = function renderTable() {\n    if (props.tableRender) {\n      return props.tableRender(props, tableAreaDom, {\n        toolbar: toolbarDom || undefined,\n        alert: alertDom || undefined,\n        table: tableDom || undefined\n      });\n    }\n\n    return tableAreaDom;\n  };\n\n  var proTableDom = /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(className, _defineProperty({}, \"\".concat(className, \"-polling\"), action.pollingLoading)),\n    style: style,\n    ref: counter.rootDomRef\n  }, isLightFilter ? null : searchNode, type !== 'form' && props.tableExtraRender && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(className, \"-extra\")\n  }, props.tableExtraRender(props, action.dataSource || [])), type !== 'form' && renderTable()); // Â¶ÇÊûú‰∏çÈúÄË¶ÅÁöÑÂÖ®Â±èÔºåConfigProvider Ê≤°ÊúâÊÑè‰πâ\n\n  if (!options || !(options === null || options === void 0 ? void 0 : options.fullScreen)) {\n    return proTableDom;\n  }\n\n  return /*#__PURE__*/React.createElement(_ConfigProvider, {\n    getPopupContainer: function getPopupContainer() {\n      return counter.rootDomRef.current || document.body;\n    }\n  }, proTableDom);\n}\n\nvar emptyObj = {};\n\nvar ProTable = function ProTable(props) {\n  var _props$revalidateOnFo, _props$expandable2;\n\n  var cardBordered = props.cardBordered,\n      request = props.request,\n      propsClassName = props.className,\n      _props$params = props.params,\n      params = _props$params === void 0 ? emptyObj : _props$params,\n      defaultData = props.defaultData,\n      headerTitle = props.headerTitle,\n      postData = props.postData,\n      ghost = props.ghost,\n      propsPagination = props.pagination,\n      propsActionRef = props.actionRef,\n      _props$columns = props.columns,\n      propsColumns = _props$columns === void 0 ? [] : _props$columns,\n      toolBarRender = props.toolBarRender,\n      onLoad = props.onLoad,\n      onRequestError = props.onRequestError,\n      style = props.style,\n      cardProps = props.cardProps,\n      tableStyle = props.tableStyle,\n      tableClassName = props.tableClassName,\n      columnsStateMap = props.columnsStateMap,\n      onColumnsStateChange = props.onColumnsStateChange,\n      options = props.options,\n      search = props.search,\n      isEditorTable = props.name,\n      onLoadingChange = props.onLoadingChange,\n      _props$rowSelection = props.rowSelection,\n      propsRowSelection = _props$rowSelection === void 0 ? false : _props$rowSelection,\n      beforeSearchSubmit = props.beforeSearchSubmit,\n      tableAlertRender = props.tableAlertRender,\n      defaultClassName = props.defaultClassName,\n      propRef = props.formRef,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'table' : _props$type,\n      _props$columnEmptyTex = props.columnEmptyText,\n      columnEmptyText = _props$columnEmptyTex === void 0 ? '-' : _props$columnEmptyTex,\n      toolbar = props.toolbar,\n      rowKey = props.rowKey,\n      manualRequest = props.manualRequest,\n      polling = props.polling,\n      tooltip = props.tooltip,\n      rest = _objectWithoutProperties(props, _excluded2);\n\n  var className = classNames(defaultClassName, propsClassName);\n  /** ÈÄöÁî®ÁöÑÊù•Êìç‰ΩúÂ≠êËäÇÁÇπÁöÑÂ∑•ÂÖ∑Á±ª */\n\n  var actionRef = useRef();\n  var defaultFormRef = useRef();\n  var formRef = propRef || defaultFormRef;\n  useImperativeHandle(propsActionRef, function () {\n    return actionRef.current;\n  });\n  /** ÂçïÈÄâÂ§öÈÄâÁöÑÁõ∏ÂÖ≥ÈÄªËæë */\n\n  var _useMountMergeState = useMountMergeState(propsRowSelection ? propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.defaultSelectedRowKeys : undefined, {\n    value: propsRowSelection ? propsRowSelection.selectedRowKeys : undefined\n  }),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      selectedRowKeys = _useMountMergeState2[0],\n      setSelectedRowKeys = _useMountMergeState2[1];\n\n  var selectedRowsRef = useRef([]);\n  var setSelectedRowsAndKey = useCallback(function (keys, rows) {\n    setSelectedRowKeys(keys);\n\n    if (!propsRowSelection || !(propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.selectedRowKeys)) {\n      selectedRowsRef.current = rows;\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [setSelectedRowKeys]);\n\n  var _useMountMergeState3 = useMountMergeState(function () {\n    // Â¶ÇÊûúÊâãÂä®Ê®°ÂºèÔºåÊàñËÄÖ search ‰∏çÂ≠òÂú®ÁöÑÊó∂ÂÄôËÆæÁΩÆ‰∏∫ undefined\n    // undefined Â∞±‰∏ç‰ºöËß¶ÂèëÈ¶ñÊ¨°Âä†ËΩΩ\n    if (manualRequest || search !== false) {\n      return undefined;\n    }\n\n    return {};\n  }),\n      _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n      formSearch = _useMountMergeState4[0],\n      setFormSearch = _useMountMergeState4[1];\n\n  var _useMountMergeState5 = useMountMergeState({}),\n      _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n      proFilter = _useMountMergeState6[0],\n      setProFilter = _useMountMergeState6[1];\n\n  var _useMountMergeState7 = useMountMergeState({}),\n      _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n      proSort = _useMountMergeState8[0],\n      setProSort = _useMountMergeState8[1];\n  /** ËÆæÁΩÆÈªòËÆ§ÊéíÂ∫èÂíåÁ≠õÈÄâÂÄº */\n\n\n  useEffect(function () {\n    var _parseDefaultColumnCo = parseDefaultColumnConfig(propsColumns),\n        sort = _parseDefaultColumnCo.sort,\n        filter = _parseDefaultColumnCo.filter;\n\n    setProFilter(filter);\n    setProSort(sort); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var intl = useIntl();\n  /** ÈúÄË¶ÅÂàùÂßãÂåñ ‰∏çÁÑ∂ÈªòËÆ§ÂèØËÉΩÊä•Èîô ËøôÈáåÂèñ‰∫Ü defaultCurrent Âíå current ‰∏∫‰∫Ü‰øùËØÅ‰∏ç‰ºöÈáçÂ§çÂà∑Êñ∞ */\n\n  var fetchPagination = _typeof(propsPagination) === 'object' ? propsPagination : {\n    defaultCurrent: 1,\n    defaultPageSize: 20,\n    pageSize: 20,\n    current: 1\n  };\n  var counter = Container.useContainer(); // ============================ useFetchData ============================\n\n  var fetchData = useMemo(function () {\n    if (!request) return undefined;\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageParams) {\n        var actionParams, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                actionParams = _objectSpread(_objectSpread(_objectSpread({}, pageParams || {}), formSearch), params); // eslint-disable-next-line no-underscore-dangle\n\n                delete actionParams._timestamp;\n                _context.next = 4;\n                return request(actionParams, proSort, proFilter);\n\n              case 4:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }, [formSearch, params, proFilter, proSort, request]);\n  var action = useFetchData(fetchData, defaultData, {\n    pageInfo: propsPagination === false ? false : fetchPagination,\n    loading: props.loading,\n    dataSource: props.dataSource,\n    onDataSourceChange: props.onDataSourceChange,\n    onLoad: onLoad,\n    onLoadingChange: onLoadingChange,\n    onRequestError: onRequestError,\n    postData: postData,\n    revalidateOnFocus: (_props$revalidateOnFo = props.revalidateOnFocus) !== null && _props$revalidateOnFo !== void 0 ? _props$revalidateOnFo : false,\n    manual: formSearch === undefined,\n    polling: polling,\n    effects: [stringify(params), stringify(formSearch), stringify(proFilter), stringify(proSort)],\n    debounceTime: props.debounceTime,\n    onPageInfoChange: function onPageInfoChange(pageInfo) {\n      var _propsPagination$onCh, _propsPagination$onSh;\n\n      if (type === 'list' || !propsPagination || !fetchData) return; // ÊÄªÊòØËß¶Âèë‰∏Ä‰∏ã onChange Âíå  onShowSizeChange\n      // ÁõÆÂâçÂè™Êúâ List Âíå Table ÊîØÊåÅÂàÜÈ°µ, List ÊúâÂàÜÈ°µÁöÑÊó∂ÂÄôÊâìÊñ≠ Table ÁöÑÂàÜÈ°µ\n\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onCh = propsPagination.onChange) === null || _propsPagination$onCh === void 0 ? void 0 : _propsPagination$onCh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onSh = propsPagination.onShowSizeChange) === null || _propsPagination$onSh === void 0 ? void 0 : _propsPagination$onSh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n    }\n  }); // ============================ END ============================\n\n  /** ÈªòËÆ§ËÅöÁÑ¶ÁöÑÊó∂ÂÄôÈáçÊñ∞ËØ∑Ê±ÇÊï∞ÊçÆÔºåËøôÊ†∑ÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÈÉΩÊòØÊúÄÊñ∞ÁöÑ„ÄÇ */\n\n  useEffect(function () {\n    var _props$form; // ÊâãÂä®Ê®°ÂºèÂíå request ‰∏∫Á©∫ÈÉΩ‰∏çÁîüÊïà\n\n\n    if (props.manualRequest || !props.request || props.revalidateOnFocus === false || ((_props$form = props.form) === null || _props$form === void 0 ? void 0 : _props$form.ignoreRules)) return; // ËÅöÁÑ¶Êó∂ÈáçÊñ∞ËØ∑Ê±Ç‰∫ã‰ª∂\n\n    var visibilitychange = function visibilitychange() {\n      if (document.visibilityState === 'visible') action.reload();\n    };\n\n    document.addEventListener('visibilitychange', visibilitychange);\n    return function () {\n      return document.removeEventListener('visibilitychange', visibilitychange);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  /** SelectedRowKeysÂèóÊéßÂ§ÑÁêÜselectRows */\n\n  var preserveRecordsRef = React.useRef(new Map()); // ============================ RowKey ============================\n\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n\n    return function (record, index) {\n      var _record$rowKey;\n\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      } // Â¶ÇÊûú props ‰∏≠Êúâname ÁöÑËØùÔºåÁî®index Êù•ÂÅöË°åÂ•ΩÔºåËøôÊ†∑Êñπ‰æøËΩ¨Âåñ‰∏∫ index\n\n\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n\n      return (_record$rowKey = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _record$rowKey !== void 0 ? _record$rowKey : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  useMemo(function () {\n    var _action$dataSource;\n\n    if ((_action$dataSource = action.dataSource) === null || _action$dataSource === void 0 ? void 0 : _action$dataSource.length) {\n      var newCache = new Map();\n      var keys = action.dataSource.map(function (data) {\n        var dataRowKey = getRowKey(data, -1);\n        newCache.set(dataRowKey, data);\n        return dataRowKey;\n      });\n      preserveRecordsRef.current = newCache;\n      return keys;\n    }\n\n    return [];\n  }, [action.dataSource, getRowKey]);\n  useEffect(function () {\n    selectedRowsRef.current = selectedRowKeys === null || selectedRowKeys === void 0 ? void 0 : selectedRowKeys.map(function (key) {\n      var _preserveRecordsRef$c;\n\n      return (_preserveRecordsRef$c = preserveRecordsRef.current) === null || _preserveRecordsRef$c === void 0 ? void 0 : _preserveRecordsRef$c.get(key);\n    });\n  }, [selectedRowKeys]);\n  /** È°µÈù¢ÁºñËæëÁöÑËÆ°ÁÆó */\n\n  var pagination = useMemo(function () {\n    var newPropsPagination = propsPagination === false ? false : _objectSpread({}, propsPagination);\n\n    var pageConfig = _objectSpread(_objectSpread({}, action.pageInfo), {}, {\n      setPageInfo: function setPageInfo(_ref3) {\n        var pageSize = _ref3.pageSize,\n            current = _ref3.current;\n        var pageInfo = action.pageInfo; // pageSize ÂèëÁîüÊîπÂèòÔºåÂπ∂‰∏î‰Ω†‰∏çÊòØÂú®Á¨¨‰∏ÄÈ°µÔºåÂàáÂõûÂà∞Á¨¨‰∏ÄÈ°µ\n        // ËøôÊ†∑ÂèØ‰ª•Èò≤Ê≠¢Âá∫Áé∞ Ë∑≥ËΩ¨Âà∞‰∏Ä‰∏™Á©∫ÁöÑÊï∞ÊçÆÈ°µÁöÑÈóÆÈ¢ò\n\n        if (pageSize === pageInfo.pageSize || pageInfo.current === 1) {\n          action.setPageInfo({\n            pageSize: pageSize,\n            current: current\n          });\n          return;\n        } // ÈÄöËøárequestÁöÑÊó∂ÂÄôÊ∏ÖÁ©∫Êï∞ÊçÆÔºåÁÑ∂ÂêéÂà∑Êñ∞‰∏çÁÑ∂ÂèØËÉΩ‰ºöÂØºËá¥ pageSize Ê≤°ÊúâÊï∞ÊçÆÂ§ö\n\n\n        if (request) action.setDataSource([]);\n        action.setPageInfo({\n          pageSize: pageSize,\n          // ÁõÆÂâçÂè™Êúâ List Âíå Table ÊîØÊåÅÂàÜÈ°µ, List ÊúâÂàÜÈ°µÁöÑÊó∂ÂÄô ËøòÊòØ‰ΩøÁî®‰πãÂâçÁöÑÂΩìÂâçÈ°µÁ†Å\n          current: type === 'list' ? current : 1\n        });\n      }\n    });\n\n    if (request && newPropsPagination) {\n      delete newPropsPagination.onChange;\n      delete newPropsPagination.onShowSizeChange;\n    }\n\n    return mergePagination(newPropsPagination, pageConfig, intl); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsPagination, action, intl]);\n  useDeepCompareEffect(function () {\n    var _action$pageInfo; // request Â≠òÂú®‰∏îparams‰∏ç‰∏∫Á©∫Ôºå‰∏îÂ∑≤ÁªèËØ∑Ê±ÇËøáÊï∞ÊçÆÊâçÈúÄË¶ÅËÆæÁΩÆ„ÄÇ\n\n\n    if (props.request && params && action.dataSource && (action === null || action === void 0 ? void 0 : (_action$pageInfo = action.pageInfo) === null || _action$pageInfo === void 0 ? void 0 : _action$pageInfo.current) !== 1) {\n      action.setPageInfo({\n        current: 1\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [params]); // ËÆæÁΩÆ name Âà∞ store ‰∏≠ÔºåÈáåÈù¢Áî®‰∫Ü ref ÔºåÊâÄ‰ª•‰∏çÁî®ÊãÖÂøÉÁõ¥Êé• set\n\n  counter.setPrefixName(props.name);\n  /** Ê∏ÖÁ©∫ÊâÄÊúâÁöÑÈÄâ‰∏≠È°π */\n\n  var _onCleanSelected = useCallback(function () {\n    if (propsRowSelection && propsRowSelection.onChange) {\n      propsRowSelection.onChange([], [], {\n        type: 'all'\n      });\n    }\n\n    setSelectedRowsAndKey([], []);\n  }, [propsRowSelection, setSelectedRowsAndKey]);\n\n  counter.setAction(actionRef.current);\n  counter.propsRef.current = props;\n  /** ÂèØÁºñËæëË°åÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ */\n\n  var editableUtils = useEditableArray(_objectSpread(_objectSpread({}, props.editable), {}, {\n    tableName: props.name,\n    getRowKey: getRowKey,\n    childrenColumnName: (_props$expandable2 = props.expandable) === null || _props$expandable2 === void 0 ? void 0 : _props$expandable2.childrenColumnName,\n    dataSource: action.dataSource || [],\n    setDataSource: function setDataSource(data) {\n      var _props$editable3, _props$editable3$onVa;\n\n      (_props$editable3 = props.editable) === null || _props$editable3 === void 0 ? void 0 : (_props$editable3$onVa = _props$editable3.onValuesChange) === null || _props$editable3$onVa === void 0 ? void 0 : _props$editable3$onVa.call(_props$editable3, undefined, data);\n      action.setDataSource(data);\n    }\n  }));\n  /** ÁªëÂÆö action */\n\n  useActionType(actionRef, action, {\n    fullScreen: function fullScreen() {\n      var _counter$rootDomRef;\n\n      if (!((_counter$rootDomRef = counter.rootDomRef) === null || _counter$rootDomRef === void 0 ? void 0 : _counter$rootDomRef.current) || !document.fullscreenEnabled) {\n        return;\n      }\n\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      } else {\n        var _counter$rootDomRef2;\n\n        (_counter$rootDomRef2 = counter.rootDomRef) === null || _counter$rootDomRef2 === void 0 ? void 0 : _counter$rootDomRef2.current.requestFullscreen();\n      }\n    },\n    onCleanSelected: function onCleanSelected() {\n      // Ê∏ÖÁ©∫ÈÄâ‰∏≠Ë°å\n      _onCleanSelected();\n    },\n    resetAll: function resetAll() {\n      var _formRef$current; // Ê∏ÖÁ©∫ÈÄâ‰∏≠Ë°å\n\n\n      _onCleanSelected(); // Ê∏ÖÁ©∫Á≠õÈÄâ\n\n\n      setProFilter({}); // Ê∏ÖÁ©∫ÊéíÂ∫è\n\n      setProSort({}); // Ê∏ÖÁ©∫ toolbar ÊêúÁ¥¢\n\n      counter.setKeyWords(undefined); // ÈáçÁΩÆÈ°µÁ†Å\n\n      action.setPageInfo({\n        current: 1\n      }); // ÈáçÁΩÆË°®Âçï\n\n      formRef === null || formRef === void 0 ? void 0 : (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n      setFormSearch({});\n    },\n    editableUtils: editableUtils\n  });\n\n  if (propsActionRef) {\n    // @ts-ignore\n    propsActionRef.current = actionRef.current;\n  } // ---------- ÂàóËÆ°ÁÆóÁõ∏ÂÖ≥ start  -----------------\n\n\n  var tableColumn = useMemo(function () {\n    var _props$expandable3;\n\n    return genProColumnToColumn({\n      columns: propsColumns,\n      counter: counter,\n      columnEmptyText: columnEmptyText,\n      type: type,\n      editableUtils: editableUtils,\n      rowKey: rowKey,\n      childrenColumnName: (_props$expandable3 = props.expandable) === null || _props$expandable3 === void 0 ? void 0 : _props$expandable3.childrenColumnName\n    }).sort(columnSort(counter.columnsMap)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsColumns, counter === null || counter === void 0 ? void 0 : counter.sortKeyColumns, counter === null || counter === void 0 ? void 0 : counter.columnsMap, columnEmptyText, type, // eslint-disable-next-line react-hooks/exhaustive-deps\n  editableUtils.editableKeys && editableUtils.editableKeys.join(',')]);\n  /** Table Column ÂèòÂåñÁöÑÊó∂ÂÄôÊõ¥Êñ∞‰∏Ä‰∏ãÔºåËøô‰∏™ÂèÇÊï∞Â∞Ü‰ºöÁî®‰∫éÊ∏≤Êüì */\n\n  useDeepCompareEffectDebounce(function () {\n    if (tableColumn && tableColumn.length > 0) {\n      // ÈáçÊñ∞ÁîüÊàêkeyÁöÑÂ≠óÁ¨¶‰∏≤Áî®‰∫éÊéíÂ∫è\n      var columnKeys = tableColumn.map(function (item) {\n        return genColumnKey(item.key, item.index);\n      });\n      counter.setSortKeyColumns(columnKeys);\n    }\n  }, [tableColumn], ['render', 'renderFormItem'], 100);\n  /** ÂêåÊ≠• PaginationÔºåÊîØÊåÅÂèóÊéßÁöÑ È°µÁ†Å Âíå pageSize */\n\n  useDeepCompareEffect(function () {\n    var pageInfo = action.pageInfo;\n\n    var _ref4 = propsPagination || {},\n        _ref4$current = _ref4.current,\n        current = _ref4$current === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current : _ref4$current,\n        _ref4$pageSize = _ref4.pageSize,\n        pageSize = _ref4$pageSize === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize : _ref4$pageSize;\n\n    if (propsPagination && (current || pageSize) && (pageSize !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize) || current !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current))) {\n      action.setPageInfo({\n        pageSize: pageSize || pageInfo.pageSize,\n        current: current || pageInfo.current\n      });\n    }\n  }, [propsPagination && propsPagination.pageSize, propsPagination && propsPagination.current]);\n  /** Ë°åÈÄâÊã©Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò */\n\n  var rowSelection = _objectSpread(_objectSpread({\n    selectedRowKeys: selectedRowKeys\n  }, propsRowSelection), {}, {\n    onChange: function onChange(keys, rows, info) {\n      if (propsRowSelection && propsRowSelection.onChange) {\n        propsRowSelection.onChange(keys, rows, info);\n      }\n\n      setSelectedRowsAndKey(keys, rows);\n    }\n  });\n  /** ÊòØ‰∏çÊòØ LightFilter, LightFilter Êúâ‰∏Ä‰∫õÁâπÊÆäÁöÑÂ§ÑÁêÜ */\n\n\n  var isLightFilter = search !== false && (search === null || search === void 0 ? void 0 : search.filterType) === 'light';\n\n  var _onFormSearchSubmit = function onFormSearchSubmit(values) {\n    // Âà§Êñ≠search.onSearchËøîÂõûÂÄºÂÜ≥ÂÆöÊòØÂê¶Êõ¥Êñ∞formSearch\n    if (options && options.search) {\n      var _options$search, _options$search$onSea;\n\n      var _ref5 = options.search === true ? {} : options.search,\n          _ref5$name = _ref5.name,\n          name = _ref5$name === void 0 ? 'keyword' : _ref5$name;\n      /** Â¶ÇÊûú‰º†ÂÖ•ÁöÑ onSearch ËøîÂõûÂÄº‰∏∫ falseÔºåÂàô‰∏çË¶ÅÊääoptions.search.nameÂØπÂ∫îÁöÑÂÄºsetÂà∞formSearch */\n\n\n      var success = (_options$search = options.search) === null || _options$search === void 0 ? void 0 : (_options$search$onSea = _options$search.onSearch) === null || _options$search$onSea === void 0 ? void 0 : _options$search$onSea.call(_options$search, counter.keyWords);\n\n      if (success !== false) {\n        setFormSearch(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, counter.keyWords)));\n        return;\n      }\n    }\n\n    setFormSearch(values);\n  };\n\n  var searchNode = search === false && type !== 'form' ? null : /*#__PURE__*/React.createElement(FormRender, {\n    pagination: pagination,\n    beforeSearchSubmit: beforeSearchSubmit,\n    action: actionRef,\n    columns: propsColumns,\n    onFormSearchSubmit: function onFormSearchSubmit(values) {\n      _onFormSearchSubmit(values);\n    },\n    ghost: ghost,\n    onReset: props.onReset,\n    onSubmit: props.onSubmit,\n    loading: !!action.loading,\n    manualRequest: manualRequest,\n    search: search,\n    form: props.form,\n    formRef: formRef,\n    type: props.type || 'table',\n    cardBordered: props.cardBordered,\n    dateFormatter: props.dateFormatter\n  });\n  /** ÂÜÖÁΩÆÁöÑÂ∑•ÂÖ∑Ê†è */\n\n  var toolbarDom = toolBarRender === false ? null : /*#__PURE__*/React.createElement(Toolbar, {\n    headerTitle: headerTitle,\n    hideToolbar: options === false && !headerTitle && !toolBarRender && !toolbar && !isLightFilter,\n    selectedRows: selectedRowsRef.current,\n    selectedRowKeys: selectedRowKeys,\n    tableColumn: tableColumn,\n    tooltip: tooltip,\n    toolbar: toolbar,\n    onFormSearchSubmit: function onFormSearchSubmit(newValues) {\n      setFormSearch(_objectSpread(_objectSpread({}, formSearch), newValues));\n    },\n    searchNode: isLightFilter ? searchNode : null,\n    options: options,\n    actionRef: actionRef,\n    toolBarRender: toolBarRender\n  });\n  /** ÂÜÖÁΩÆÁöÑÂ§öÈÄâÊìç‰ΩúÊ†è */\n\n  var alertDom = propsRowSelection !== false ? /*#__PURE__*/React.createElement(Alert, {\n    selectedRowKeys: selectedRowKeys,\n    selectedRows: selectedRowsRef.current,\n    onCleanSelected: _onCleanSelected,\n    alertOptionRender: rest.tableAlertOptionRender,\n    alertInfoRender: tableAlertRender,\n    alwaysShowAlert: propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.alwaysShowAlert\n  }) : null;\n  return /*#__PURE__*/React.createElement(TableRender, _extends({}, props, {\n    name: isEditorTable,\n    size: counter.tableSize,\n    onSizeChange: counter.setTableSize,\n    pagination: pagination,\n    searchNode: searchNode,\n    rowSelection: propsRowSelection !== false ? rowSelection : undefined,\n    className: className,\n    tableColumn: tableColumn,\n    isLightFilter: isLightFilter,\n    action: action,\n    alertDom: alertDom,\n    toolbarDom: toolbarDom,\n    onSortChange: setProSort,\n    onFilterChange: setProFilter,\n    editableUtils: editableUtils,\n    getRowKey: getRowKey\n  }));\n};\n/**\n * üèÜ Use Ant Design Table like a Pro! Êõ¥Âø´ Êõ¥Â•Ω Êõ¥Êñπ‰æø\n *\n * @param props\n */\n\n\nvar ProviderWarp = function ProviderWarp(props) {\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var ErrorComponent = props.ErrorBoundary === false ? React.Fragment : props.ErrorBoundary || ErrorBoundary;\n  return /*#__PURE__*/React.createElement(Container.Provider, {\n    initialState: props\n  }, /*#__PURE__*/React.createElement(ConfigProviderWrap, null, /*#__PURE__*/React.createElement(ErrorComponent, null, /*#__PURE__*/React.createElement(ProTable, _extends({\n    defaultClassName: getPrefixCls('pro-table')\n  }, props)))));\n};\n\nProviderWarp.Summary = _Table.Summary;\nexport default ProviderWarp;","map":{"version":3,"sources":["/Users/jameszow/Documents/RustWorkSpace/covid-ipfs/covid-ipfs-client/node_modules/@ant-design/pro-table/es/Table.js"],"names":["_regeneratorRuntime","_asyncToGenerator","_typeof","_slicedToArray","_ConfigProvider","_Spin","_Table","_extends","_defineProperty","_toConsumableArray","_objectSpread","_objectWithoutProperties","_excluded","_excluded2","ProCard","ProForm","ConfigProviderWrap","useIntl","editableRowByKey","ErrorBoundary","omitUndefined","recordKeyToString","useDeepCompareEffect","useDeepCompareEffectDebounce","useEditableArray","useMountMergeState","classNames","React","useCallback","useContext","useEffect","useImperativeHandle","useMemo","useRef","stringify","Alert","FormRender","Toolbar","Container","useFetchData","genColumnKey","isBordered","mergePagination","parseDefaultColumnConfig","useActionType","columnSort","genProColumnToColumn","TableRender","props","rowKey","tableClassName","action","tableColumns","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey","rest","counter","useContainer","columns","loopFilter","column","map","item","columnKey","key","index","config","columnsMap","show","children","filter","Boolean","useLocaleFilter","every","filters","onFilter","undefined","editableDataSource","dataSource","_ref","newLineRecord","newLineOptions","row","defaultValue","parentKey","_recordKeyToString","_props$expandable","actionProps","data","map_row_parentKey","toString","recordKey","childrenColumnName","expandable","position","concat","current","pageSize","newDataSource","length","push","splice","getTableProps","isExtraColumns","extraColumn","loading","onChange","changePagination","sorter","extra","_rest$onChange","call","Array","isArray","reduce","pre","value","field","order","_sorter$column","sorterOfColumn","isSortByField","baseTableDom","createElement","tableDom","tableViewRender","editable","setEditorTableForm","form","tableContentDom","_props$editable","_props$editable2","Fragment","onInit","_","formRef","formProps","component","onValuesChange","submitter","omitNil","dateFormatter","contentRender","items","editableForm","loadingProps","paddingTop","textAlign","tableAreaDom","ghost","bordered","bodyStyle","padding","renderTable","tableRender","toolbar","alert","table","proTableDom","pollingLoading","ref","rootDomRef","tableExtraRender","fullScreen","getPopupContainer","document","body","emptyObj","ProTable","_props$revalidateOnFo","_props$expandable2","request","propsClassName","_props$params","params","defaultData","headerTitle","postData","propsPagination","propsActionRef","actionRef","_props$columns","propsColumns","toolBarRender","onLoad","onRequestError","columnsStateMap","onColumnsStateChange","search","isEditorTable","onLoadingChange","_props$rowSelection","propsRowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","propRef","_props$type","_props$columnEmptyTex","columnEmptyText","manualRequest","polling","tooltip","defaultFormRef","_useMountMergeState","defaultSelectedRowKeys","selectedRowKeys","_useMountMergeState2","setSelectedRowKeys","selectedRowsRef","setSelectedRowsAndKey","keys","rows","_useMountMergeState3","_useMountMergeState4","formSearch","setFormSearch","_useMountMergeState5","_useMountMergeState6","proFilter","setProFilter","_useMountMergeState7","_useMountMergeState8","proSort","setProSort","_parseDefaultColumnCo","sort","intl","fetchPagination","defaultCurrent","defaultPageSize","fetchData","_ref2","mark","_callee","pageParams","actionParams","response","wrap","_callee$","_context","prev","next","_timestamp","sent","abrupt","stop","_x","apply","arguments","pageInfo","onDataSourceChange","revalidateOnFocus","manual","effects","debounceTime","onPageInfoChange","_propsPagination$onCh","_propsPagination$onSh","onShowSizeChange","_props$form","ignoreRules","visibilitychange","visibilityState","reload","addEventListener","removeEventListener","preserveRecordsRef","Map","record","_record$rowKey","_action$dataSource","newCache","dataRowKey","set","_preserveRecordsRef$c","get","newPropsPagination","pageConfig","setPageInfo","_ref3","setDataSource","_action$pageInfo","setPrefixName","_onCleanSelected","setAction","propsRef","tableName","_props$editable3","_props$editable3$onVa","_counter$rootDomRef","fullscreenEnabled","fullscreenElement","exitFullscreen","_counter$rootDomRef2","requestFullscreen","onCleanSelected","resetAll","_formRef$current","setKeyWords","resetFields","_props$expandable3","sortKeyColumns","editableKeys","join","columnKeys","setSortKeyColumns","_ref4","_ref4$current","_ref4$pageSize","info","filterType","_onFormSearchSubmit","onFormSearchSubmit","values","_options$search","_options$search$onSea","_ref5","_ref5$name","success","onSearch","keyWords","onReset","onSubmit","hideToolbar","selectedRows","newValues","alertOptionRender","tableAlertOptionRender","alertInfoRender","alwaysShowAlert","tableSize","onSizeChange","setTableSize","ProviderWarp","_useContext","ConfigContext","getPrefixCls","ErrorComponent","Provider","initialState","Summary"],"mappings":"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","sourcesContent":["import _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/es/config-provider/style\";\nimport _ConfigProvider from \"antd/es/config-provider\";\nimport \"antd/es/spin/style\";\nimport _Spin from \"antd/es/spin\";\nimport \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"rowKey\", \"tableClassName\", \"action\", \"tableColumn\", \"type\", \"pagination\", \"rowSelection\", \"size\", \"defaultSize\", \"tableStyle\", \"toolbarDom\", \"searchNode\", \"style\", \"cardProps\", \"alertDom\", \"name\", \"onSortChange\", \"onFilterChange\", \"options\", \"isLightFilter\", \"className\", \"cardBordered\", \"editableUtils\", \"getRowKey\"],\n    _excluded2 = [\"cardBordered\", \"request\", \"className\", \"params\", \"defaultData\", \"headerTitle\", \"postData\", \"ghost\", \"pagination\", \"actionRef\", \"columns\", \"toolBarRender\", \"onLoad\", \"onRequestError\", \"style\", \"cardProps\", \"tableStyle\", \"tableClassName\", \"columnsStateMap\", \"onColumnsStateChange\", \"options\", \"search\", \"name\", \"onLoadingChange\", \"rowSelection\", \"beforeSearchSubmit\", \"tableAlertRender\", \"defaultClassName\", \"formRef\", \"type\", \"columnEmptyText\", \"toolbar\", \"rowKey\", \"manualRequest\", \"polling\", \"tooltip\"];\n\n/* eslint max-classes-per-file: [\"error\", 3] */\nimport ProCard from '@ant-design/pro-card';\nimport ProForm from '@ant-design/pro-form';\nimport { ConfigProviderWrap, useIntl } from '@ant-design/pro-provider';\nimport { editableRowByKey, ErrorBoundary, omitUndefined, recordKeyToString, useDeepCompareEffect, useDeepCompareEffectDebounce, useEditableArray, useMountMergeState } from '@ant-design/pro-utils';\nimport classNames from 'classnames';\nimport React, { useCallback, useContext, useEffect, useImperativeHandle, useMemo, useRef } from 'react';\nimport { stringify } from 'use-json-comparison';\nimport Alert from './components/Alert';\nimport FormRender from './components/Form';\nimport Toolbar from './components/ToolBar';\nimport Container from './container';\nimport './index.less';\nimport useFetchData from './useFetchData';\nimport { genColumnKey, isBordered, mergePagination, parseDefaultColumnConfig, useActionType } from './utils';\nimport { columnSort } from './utils/columnSort';\nimport { genProColumnToColumn } from './utils/genProColumnToColumn';\n\nfunction TableRender(props) {\n  var rowKey = props.rowKey,\n      tableClassName = props.tableClassName,\n      action = props.action,\n      tableColumns = props.tableColumn,\n      type = props.type,\n      pagination = props.pagination,\n      rowSelection = props.rowSelection,\n      size = props.size,\n      defaultSize = props.defaultSize,\n      tableStyle = props.tableStyle,\n      toolbarDom = props.toolbarDom,\n      searchNode = props.searchNode,\n      style = props.style,\n      cardProps = props.cardProps,\n      alertDom = props.alertDom,\n      name = props.name,\n      onSortChange = props.onSortChange,\n      onFilterChange = props.onFilterChange,\n      options = props.options,\n      isLightFilter = props.isLightFilter,\n      className = props.className,\n      cardBordered = props.cardBordered,\n      editableUtils = props.editableUtils,\n      getRowKey = props.getRowKey,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var counter = Container.useContainer();\n  /** ÈúÄË¶ÅÈÅçÂéÜ‰∏Ä‰∏ãÔºå‰∏çÁÑ∂‰∏çÊîØÊåÅÂµåÂ•óË°®Ê†º */\n\n  var columns = useMemo(function () {\n    var loopFilter = function loopFilter(column) {\n      return column.map(function (item) {\n        // Âà†Êéâ‰∏çÂ∫îËØ•ÊòæÁ§∫ÁöÑ\n        var columnKey = genColumnKey(item.key, item.index);\n        var config = counter.columnsMap[columnKey];\n\n        if (config && config.show === false) {\n          return false;\n        }\n\n        if (item.children) {\n          return _objectSpread(_objectSpread({}, item), {}, {\n            children: loopFilter(item.children)\n          });\n        }\n\n        return item;\n      }).filter(Boolean);\n    };\n\n    return loopFilter(tableColumns);\n  }, [counter.columnsMap, tableColumns]);\n  /** Â¶ÇÊûúÊâÄÊúâÂàó‰∏≠ÁöÑ filters=true| undefined ËØ¥ÊòéÊòØÁî®ÁöÑÊòØÊú¨Âú∞Á≠õÈÄâ ‰ªª‰Ωï‰∏ÄÂàóÈÖçÁΩÆ filters=falseÔºåÂ∞±ËÉΩÁªïËøáËøô‰∏™Âà§Êñ≠ */\n\n  var useLocaleFilter = useMemo(function () {\n    return columns === null || columns === void 0 ? void 0 : columns.every(function (column) {\n      return column.filters === true && column.onFilter === true || column.filters === undefined && column.onFilter === undefined;\n    });\n  }, [columns]);\n  /**\n   * Â¶ÇÊûúÊòØÂàÜÈ°µÁöÑÊñ∞Â¢ûÔºåÊÄªÊòØÂä†Âà∞ÊúÄÂêé‰∏ÄË°å\n   *\n   * @returns\n   */\n\n  var editableDataSource = function editableDataSource(dataSource) {\n    var _ref = editableUtils.newLineRecord || {},\n        newLineOptions = _ref.options,\n        row = _ref.defaultValue;\n\n    if (newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.parentKey) {\n      var _recordKeyToString, _props$expandable;\n\n      var actionProps = {\n        data: dataSource,\n        getRowKey: getRowKey,\n        row: _objectSpread(_objectSpread({}, row), {}, {\n          map_row_parentKey: (_recordKeyToString = recordKeyToString(newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.parentKey)) === null || _recordKeyToString === void 0 ? void 0 : _recordKeyToString.toString()\n        }),\n        key: newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.recordKey,\n        childrenColumnName: ((_props$expandable = props.expandable) === null || _props$expandable === void 0 ? void 0 : _props$expandable.childrenColumnName) || 'children'\n      };\n      return editableRowByKey(actionProps, newLineOptions.position === 'top' ? 'top' : 'update');\n    }\n\n    if ((newLineOptions === null || newLineOptions === void 0 ? void 0 : newLineOptions.position) === 'top') {\n      return [row].concat(_toConsumableArray(action.dataSource));\n    } // Â¶ÇÊûúÊúâÂàÜÈ°µÁöÑÂäüËÉΩÔºåÊàë‰ª¨Âä†Âà∞Ëøô‰∏ÄÈ°µÁöÑÊú´Â∞æ\n\n\n    if (pagination && (pagination === null || pagination === void 0 ? void 0 : pagination.current) && (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize)) {\n      var newDataSource = _toConsumableArray(action.dataSource);\n\n      if ((pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) > newDataSource.length) {\n        newDataSource.push(row);\n        return newDataSource;\n      }\n\n      newDataSource.splice((pagination === null || pagination === void 0 ? void 0 : pagination.current) * (pagination === null || pagination === void 0 ? void 0 : pagination.pageSize) - 1, 0, row);\n      return newDataSource;\n    }\n\n    return [].concat(_toConsumableArray(action.dataSource), [row]);\n  };\n\n  var getTableProps = function getTableProps() {\n    return _objectSpread(_objectSpread({}, rest), {}, {\n      size: size,\n      rowSelection: rowSelection === false ? undefined : rowSelection,\n      className: tableClassName,\n      style: tableStyle,\n      columns: columns.map(function (item) {\n        return item.isExtraColumns ? item.extraColumn : item;\n      }),\n      loading: action.loading,\n      dataSource: editableUtils.newLineRecord ? editableDataSource(action.dataSource) : action.dataSource,\n      pagination: pagination,\n      onChange: function onChange(changePagination, filters, sorter, extra) {\n        var _rest$onChange;\n\n        (_rest$onChange = rest.onChange) === null || _rest$onChange === void 0 ? void 0 : _rest$onChange.call(rest, changePagination, filters, sorter, extra);\n\n        if (!useLocaleFilter) {\n          onFilterChange(omitUndefined(filters));\n        } // Âà∂ÈÄ†Á≠õÈÄâÁöÑÊï∞ÊçÆ\n        // Âà∂ÈÄ†‰∏Ä‰∏™ÊéíÂ∫èÁöÑÊï∞ÊçÆ\n\n\n        if (Array.isArray(sorter)) {\n          var data = sorter.reduce(function (pre, value) {\n            return _objectSpread(_objectSpread({}, pre), {}, _defineProperty({}, \"\".concat(value.field), value.order));\n          }, {});\n          onSortChange(omitUndefined(data));\n        } else {\n          var _sorter$column;\n\n          var sorterOfColumn = (_sorter$column = sorter.column) === null || _sorter$column === void 0 ? void 0 : _sorter$column.sorter;\n          var isSortByField = (sorterOfColumn === null || sorterOfColumn === void 0 ? void 0 : sorterOfColumn.toString()) === sorterOfColumn;\n          onSortChange(omitUndefined(_defineProperty({}, \"\".concat(isSortByField ? sorterOfColumn : sorter.field), sorter.order)) || {});\n        }\n      }\n    });\n  };\n  /** ÈªòËÆ§ÁöÑ table domÔºåÂ¶ÇÊûúÊòØÁºñËæëÊ®°ÂºèÔºåÂ§ñÈù¢ËøòË¶ÅÂåÖ‰∏™ form */\n\n\n  var baseTableDom = /*#__PURE__*/React.createElement(_Table, _extends({}, getTableProps(), {\n    rowKey: rowKey\n  }));\n  /** Ëá™ÂÆö‰πâÁöÑ render */\n\n  var tableDom = props.tableViewRender ? props.tableViewRender(_objectSpread(_objectSpread({}, getTableProps()), {}, {\n    rowSelection: rowSelection !== false ? rowSelection : undefined\n  }), baseTableDom) : baseTableDom;\n  useMemo(function () {\n    // Â¶ÇÊûúÂ∏¶‰∫ÜnameÔºåËØ¥ÊòéË¶ÅÁî®Ëá™Â∏¶ÁöÑ formÔºåÈúÄË¶ÅËÆæÁΩÆ‰∏Ä‰∏ã„ÄÇ\n    if (props.name && props.editable) {\n      counter.setEditorTableForm(props.editable.form);\n    }\n  }, [counter, props.editable, props.name]);\n  var tableContentDom = useMemo(function () {\n    if (props.editable && !props.name) {\n      var _props$editable, _props$editable2;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, toolbarDom, alertDom, /*#__PURE__*/React.createElement(ProForm, _extends({\n        onInit: function onInit(_, form) {\n          counter.setEditorTableForm(form);\n        } // @ts-ignore\n        ,\n        formRef: function formRef(form) {\n          counter.setEditorTableForm(form);\n        }\n      }, (_props$editable = props.editable) === null || _props$editable === void 0 ? void 0 : _props$editable.formProps, {\n        component: false,\n        form: (_props$editable2 = props.editable) === null || _props$editable2 === void 0 ? void 0 : _props$editable2.form,\n        onValuesChange: editableUtils.onValuesChange,\n        key: \"table\",\n        submitter: false,\n        omitNil: false,\n        dateFormatter: props.dateFormatter,\n        contentRender: function contentRender(items) {\n          if (counter.editableForm) return items;\n          if (props.loading === false) return;\n          var loadingProps = props.loading === true ? {} : props.loading;\n          return /*#__PURE__*/React.createElement(\"div\", {\n            style: {\n              paddingTop: 100,\n              textAlign: 'center'\n            }\n          }, /*#__PURE__*/React.createElement(_Spin, _extends({\n            size: \"large\"\n          }, loadingProps)));\n        }\n      }), tableDom));\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, toolbarDom, alertDom, counter.editableForm || !props.editable ? tableDom : null); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [alertDom, props.loading, !!props.editable, tableDom, toolbarDom]);\n  /** Table Âå∫ÂüüÁöÑ domÔºå‰∏∫‰∫ÜÊñπ‰æø render */\n\n  var tableAreaDom = // cardProps ÊàñËÄÖ Êúâ‰∫Üname Â∞±‰∏çÈúÄË¶ÅËøô‰∏™padding‰∫ÜÔºå‰∏çÁÑ∂‰ºöÂØºËá¥‰∏çÂ•ΩÂØπÂÖ∂\n  cardProps === false || !!props.name ? tableContentDom : /*#__PURE__*/React.createElement(ProCard, _extends({\n    ghost: props.ghost,\n    bordered: isBordered('table', cardBordered),\n    bodyStyle: toolbarDom ? {\n      paddingTop: 0\n    } : {\n      padding: 0\n    }\n  }, cardProps), tableContentDom);\n\n  var renderTable = function renderTable() {\n    if (props.tableRender) {\n      return props.tableRender(props, tableAreaDom, {\n        toolbar: toolbarDom || undefined,\n        alert: alertDom || undefined,\n        table: tableDom || undefined\n      });\n    }\n\n    return tableAreaDom;\n  };\n\n  var proTableDom = /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(className, _defineProperty({}, \"\".concat(className, \"-polling\"), action.pollingLoading)),\n    style: style,\n    ref: counter.rootDomRef\n  }, isLightFilter ? null : searchNode, type !== 'form' && props.tableExtraRender && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(className, \"-extra\")\n  }, props.tableExtraRender(props, action.dataSource || [])), type !== 'form' && renderTable()); // Â¶ÇÊûú‰∏çÈúÄË¶ÅÁöÑÂÖ®Â±èÔºåConfigProvider Ê≤°ÊúâÊÑè‰πâ\n\n  if (!options || !(options === null || options === void 0 ? void 0 : options.fullScreen)) {\n    return proTableDom;\n  }\n\n  return /*#__PURE__*/React.createElement(_ConfigProvider, {\n    getPopupContainer: function getPopupContainer() {\n      return counter.rootDomRef.current || document.body;\n    }\n  }, proTableDom);\n}\n\nvar emptyObj = {};\n\nvar ProTable = function ProTable(props) {\n  var _props$revalidateOnFo, _props$expandable2;\n\n  var cardBordered = props.cardBordered,\n      request = props.request,\n      propsClassName = props.className,\n      _props$params = props.params,\n      params = _props$params === void 0 ? emptyObj : _props$params,\n      defaultData = props.defaultData,\n      headerTitle = props.headerTitle,\n      postData = props.postData,\n      ghost = props.ghost,\n      propsPagination = props.pagination,\n      propsActionRef = props.actionRef,\n      _props$columns = props.columns,\n      propsColumns = _props$columns === void 0 ? [] : _props$columns,\n      toolBarRender = props.toolBarRender,\n      onLoad = props.onLoad,\n      onRequestError = props.onRequestError,\n      style = props.style,\n      cardProps = props.cardProps,\n      tableStyle = props.tableStyle,\n      tableClassName = props.tableClassName,\n      columnsStateMap = props.columnsStateMap,\n      onColumnsStateChange = props.onColumnsStateChange,\n      options = props.options,\n      search = props.search,\n      isEditorTable = props.name,\n      onLoadingChange = props.onLoadingChange,\n      _props$rowSelection = props.rowSelection,\n      propsRowSelection = _props$rowSelection === void 0 ? false : _props$rowSelection,\n      beforeSearchSubmit = props.beforeSearchSubmit,\n      tableAlertRender = props.tableAlertRender,\n      defaultClassName = props.defaultClassName,\n      propRef = props.formRef,\n      _props$type = props.type,\n      type = _props$type === void 0 ? 'table' : _props$type,\n      _props$columnEmptyTex = props.columnEmptyText,\n      columnEmptyText = _props$columnEmptyTex === void 0 ? '-' : _props$columnEmptyTex,\n      toolbar = props.toolbar,\n      rowKey = props.rowKey,\n      manualRequest = props.manualRequest,\n      polling = props.polling,\n      tooltip = props.tooltip,\n      rest = _objectWithoutProperties(props, _excluded2);\n\n  var className = classNames(defaultClassName, propsClassName);\n  /** ÈÄöÁî®ÁöÑÊù•Êìç‰ΩúÂ≠êËäÇÁÇπÁöÑÂ∑•ÂÖ∑Á±ª */\n\n  var actionRef = useRef();\n  var defaultFormRef = useRef();\n  var formRef = propRef || defaultFormRef;\n  useImperativeHandle(propsActionRef, function () {\n    return actionRef.current;\n  });\n  /** ÂçïÈÄâÂ§öÈÄâÁöÑÁõ∏ÂÖ≥ÈÄªËæë */\n\n  var _useMountMergeState = useMountMergeState(propsRowSelection ? propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.defaultSelectedRowKeys : undefined, {\n    value: propsRowSelection ? propsRowSelection.selectedRowKeys : undefined\n  }),\n      _useMountMergeState2 = _slicedToArray(_useMountMergeState, 2),\n      selectedRowKeys = _useMountMergeState2[0],\n      setSelectedRowKeys = _useMountMergeState2[1];\n\n  var selectedRowsRef = useRef([]);\n  var setSelectedRowsAndKey = useCallback(function (keys, rows) {\n    setSelectedRowKeys(keys);\n\n    if (!propsRowSelection || !(propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.selectedRowKeys)) {\n      selectedRowsRef.current = rows;\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [setSelectedRowKeys]);\n\n  var _useMountMergeState3 = useMountMergeState(function () {\n    // Â¶ÇÊûúÊâãÂä®Ê®°ÂºèÔºåÊàñËÄÖ search ‰∏çÂ≠òÂú®ÁöÑÊó∂ÂÄôËÆæÁΩÆ‰∏∫ undefined\n    // undefined Â∞±‰∏ç‰ºöËß¶ÂèëÈ¶ñÊ¨°Âä†ËΩΩ\n    if (manualRequest || search !== false) {\n      return undefined;\n    }\n\n    return {};\n  }),\n      _useMountMergeState4 = _slicedToArray(_useMountMergeState3, 2),\n      formSearch = _useMountMergeState4[0],\n      setFormSearch = _useMountMergeState4[1];\n\n  var _useMountMergeState5 = useMountMergeState({}),\n      _useMountMergeState6 = _slicedToArray(_useMountMergeState5, 2),\n      proFilter = _useMountMergeState6[0],\n      setProFilter = _useMountMergeState6[1];\n\n  var _useMountMergeState7 = useMountMergeState({}),\n      _useMountMergeState8 = _slicedToArray(_useMountMergeState7, 2),\n      proSort = _useMountMergeState8[0],\n      setProSort = _useMountMergeState8[1];\n  /** ËÆæÁΩÆÈªòËÆ§ÊéíÂ∫èÂíåÁ≠õÈÄâÂÄº */\n\n\n  useEffect(function () {\n    var _parseDefaultColumnCo = parseDefaultColumnConfig(propsColumns),\n        sort = _parseDefaultColumnCo.sort,\n        filter = _parseDefaultColumnCo.filter;\n\n    setProFilter(filter);\n    setProSort(sort); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  var intl = useIntl();\n  /** ÈúÄË¶ÅÂàùÂßãÂåñ ‰∏çÁÑ∂ÈªòËÆ§ÂèØËÉΩÊä•Èîô ËøôÈáåÂèñ‰∫Ü defaultCurrent Âíå current ‰∏∫‰∫Ü‰øùËØÅ‰∏ç‰ºöÈáçÂ§çÂà∑Êñ∞ */\n\n  var fetchPagination = _typeof(propsPagination) === 'object' ? propsPagination : {\n    defaultCurrent: 1,\n    defaultPageSize: 20,\n    pageSize: 20,\n    current: 1\n  };\n  var counter = Container.useContainer(); // ============================ useFetchData ============================\n\n  var fetchData = useMemo(function () {\n    if (!request) return undefined;\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(pageParams) {\n        var actionParams, response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                actionParams = _objectSpread(_objectSpread(_objectSpread({}, pageParams || {}), formSearch), params); // eslint-disable-next-line no-underscore-dangle\n\n                delete actionParams._timestamp;\n                _context.next = 4;\n                return request(actionParams, proSort, proFilter);\n\n              case 4:\n                response = _context.sent;\n                return _context.abrupt(\"return\", response);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }, [formSearch, params, proFilter, proSort, request]);\n  var action = useFetchData(fetchData, defaultData, {\n    pageInfo: propsPagination === false ? false : fetchPagination,\n    loading: props.loading,\n    dataSource: props.dataSource,\n    onDataSourceChange: props.onDataSourceChange,\n    onLoad: onLoad,\n    onLoadingChange: onLoadingChange,\n    onRequestError: onRequestError,\n    postData: postData,\n    revalidateOnFocus: (_props$revalidateOnFo = props.revalidateOnFocus) !== null && _props$revalidateOnFo !== void 0 ? _props$revalidateOnFo : false,\n    manual: formSearch === undefined,\n    polling: polling,\n    effects: [stringify(params), stringify(formSearch), stringify(proFilter), stringify(proSort)],\n    debounceTime: props.debounceTime,\n    onPageInfoChange: function onPageInfoChange(pageInfo) {\n      var _propsPagination$onCh, _propsPagination$onSh;\n\n      if (type === 'list' || !propsPagination || !fetchData) return; // ÊÄªÊòØËß¶Âèë‰∏Ä‰∏ã onChange Âíå  onShowSizeChange\n      // ÁõÆÂâçÂè™Êúâ List Âíå Table ÊîØÊåÅÂàÜÈ°µ, List ÊúâÂàÜÈ°µÁöÑÊó∂ÂÄôÊâìÊñ≠ Table ÁöÑÂàÜÈ°µ\n\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onCh = propsPagination.onChange) === null || _propsPagination$onCh === void 0 ? void 0 : _propsPagination$onCh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n      propsPagination === null || propsPagination === void 0 ? void 0 : (_propsPagination$onSh = propsPagination.onShowSizeChange) === null || _propsPagination$onSh === void 0 ? void 0 : _propsPagination$onSh.call(propsPagination, pageInfo.current, pageInfo.pageSize);\n    }\n  }); // ============================ END ============================\n\n  /** ÈªòËÆ§ËÅöÁÑ¶ÁöÑÊó∂ÂÄôÈáçÊñ∞ËØ∑Ê±ÇÊï∞ÊçÆÔºåËøôÊ†∑ÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÈÉΩÊòØÊúÄÊñ∞ÁöÑ„ÄÇ */\n\n  useEffect(function () {\n    var _props$form;\n\n    // ÊâãÂä®Ê®°ÂºèÂíå request ‰∏∫Á©∫ÈÉΩ‰∏çÁîüÊïà\n    if (props.manualRequest || !props.request || props.revalidateOnFocus === false || ((_props$form = props.form) === null || _props$form === void 0 ? void 0 : _props$form.ignoreRules)) return; // ËÅöÁÑ¶Êó∂ÈáçÊñ∞ËØ∑Ê±Ç‰∫ã‰ª∂\n\n    var visibilitychange = function visibilitychange() {\n      if (document.visibilityState === 'visible') action.reload();\n    };\n\n    document.addEventListener('visibilitychange', visibilitychange);\n    return function () {\n      return document.removeEventListener('visibilitychange', visibilitychange);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  /** SelectedRowKeysÂèóÊéßÂ§ÑÁêÜselectRows */\n\n  var preserveRecordsRef = React.useRef(new Map()); // ============================ RowKey ============================\n\n  var getRowKey = React.useMemo(function () {\n    if (typeof rowKey === 'function') {\n      return rowKey;\n    }\n\n    return function (record, index) {\n      var _record$rowKey;\n\n      if (index === -1) {\n        return record === null || record === void 0 ? void 0 : record[rowKey];\n      } // Â¶ÇÊûú props ‰∏≠Êúâname ÁöÑËØùÔºåÁî®index Êù•ÂÅöË°åÂ•ΩÔºåËøôÊ†∑Êñπ‰æøËΩ¨Âåñ‰∏∫ index\n\n\n      if (props.name) {\n        return index === null || index === void 0 ? void 0 : index.toString();\n      }\n\n      return (_record$rowKey = record === null || record === void 0 ? void 0 : record[rowKey]) !== null && _record$rowKey !== void 0 ? _record$rowKey : index === null || index === void 0 ? void 0 : index.toString();\n    };\n  }, [props.name, rowKey]);\n  useMemo(function () {\n    var _action$dataSource;\n\n    if ((_action$dataSource = action.dataSource) === null || _action$dataSource === void 0 ? void 0 : _action$dataSource.length) {\n      var newCache = new Map();\n      var keys = action.dataSource.map(function (data) {\n        var dataRowKey = getRowKey(data, -1);\n        newCache.set(dataRowKey, data);\n        return dataRowKey;\n      });\n      preserveRecordsRef.current = newCache;\n      return keys;\n    }\n\n    return [];\n  }, [action.dataSource, getRowKey]);\n  useEffect(function () {\n    selectedRowsRef.current = selectedRowKeys === null || selectedRowKeys === void 0 ? void 0 : selectedRowKeys.map(function (key) {\n      var _preserveRecordsRef$c;\n\n      return (_preserveRecordsRef$c = preserveRecordsRef.current) === null || _preserveRecordsRef$c === void 0 ? void 0 : _preserveRecordsRef$c.get(key);\n    });\n  }, [selectedRowKeys]);\n  /** È°µÈù¢ÁºñËæëÁöÑËÆ°ÁÆó */\n\n  var pagination = useMemo(function () {\n    var newPropsPagination = propsPagination === false ? false : _objectSpread({}, propsPagination);\n\n    var pageConfig = _objectSpread(_objectSpread({}, action.pageInfo), {}, {\n      setPageInfo: function setPageInfo(_ref3) {\n        var pageSize = _ref3.pageSize,\n            current = _ref3.current;\n        var pageInfo = action.pageInfo; // pageSize ÂèëÁîüÊîπÂèòÔºåÂπ∂‰∏î‰Ω†‰∏çÊòØÂú®Á¨¨‰∏ÄÈ°µÔºåÂàáÂõûÂà∞Á¨¨‰∏ÄÈ°µ\n        // ËøôÊ†∑ÂèØ‰ª•Èò≤Ê≠¢Âá∫Áé∞ Ë∑≥ËΩ¨Âà∞‰∏Ä‰∏™Á©∫ÁöÑÊï∞ÊçÆÈ°µÁöÑÈóÆÈ¢ò\n\n        if (pageSize === pageInfo.pageSize || pageInfo.current === 1) {\n          action.setPageInfo({\n            pageSize: pageSize,\n            current: current\n          });\n          return;\n        } // ÈÄöËøárequestÁöÑÊó∂ÂÄôÊ∏ÖÁ©∫Êï∞ÊçÆÔºåÁÑ∂ÂêéÂà∑Êñ∞‰∏çÁÑ∂ÂèØËÉΩ‰ºöÂØºËá¥ pageSize Ê≤°ÊúâÊï∞ÊçÆÂ§ö\n\n\n        if (request) action.setDataSource([]);\n        action.setPageInfo({\n          pageSize: pageSize,\n          // ÁõÆÂâçÂè™Êúâ List Âíå Table ÊîØÊåÅÂàÜÈ°µ, List ÊúâÂàÜÈ°µÁöÑÊó∂ÂÄô ËøòÊòØ‰ΩøÁî®‰πãÂâçÁöÑÂΩìÂâçÈ°µÁ†Å\n          current: type === 'list' ? current : 1\n        });\n      }\n    });\n\n    if (request && newPropsPagination) {\n      delete newPropsPagination.onChange;\n      delete newPropsPagination.onShowSizeChange;\n    }\n\n    return mergePagination(newPropsPagination, pageConfig, intl); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsPagination, action, intl]);\n  useDeepCompareEffect(function () {\n    var _action$pageInfo;\n\n    // request Â≠òÂú®‰∏îparams‰∏ç‰∏∫Á©∫Ôºå‰∏îÂ∑≤ÁªèËØ∑Ê±ÇËøáÊï∞ÊçÆÊâçÈúÄË¶ÅËÆæÁΩÆ„ÄÇ\n    if (props.request && params && action.dataSource && (action === null || action === void 0 ? void 0 : (_action$pageInfo = action.pageInfo) === null || _action$pageInfo === void 0 ? void 0 : _action$pageInfo.current) !== 1) {\n      action.setPageInfo({\n        current: 1\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [params]); // ËÆæÁΩÆ name Âà∞ store ‰∏≠ÔºåÈáåÈù¢Áî®‰∫Ü ref ÔºåÊâÄ‰ª•‰∏çÁî®ÊãÖÂøÉÁõ¥Êé• set\n\n  counter.setPrefixName(props.name);\n  /** Ê∏ÖÁ©∫ÊâÄÊúâÁöÑÈÄâ‰∏≠È°π */\n\n  var _onCleanSelected = useCallback(function () {\n    if (propsRowSelection && propsRowSelection.onChange) {\n      propsRowSelection.onChange([], [], {\n        type: 'all'\n      });\n    }\n\n    setSelectedRowsAndKey([], []);\n  }, [propsRowSelection, setSelectedRowsAndKey]);\n\n  counter.setAction(actionRef.current);\n  counter.propsRef.current = props;\n  /** ÂèØÁºñËæëË°åÁöÑÁõ∏ÂÖ≥ÈÖçÁΩÆ */\n\n  var editableUtils = useEditableArray(_objectSpread(_objectSpread({}, props.editable), {}, {\n    tableName: props.name,\n    getRowKey: getRowKey,\n    childrenColumnName: (_props$expandable2 = props.expandable) === null || _props$expandable2 === void 0 ? void 0 : _props$expandable2.childrenColumnName,\n    dataSource: action.dataSource || [],\n    setDataSource: function setDataSource(data) {\n      var _props$editable3, _props$editable3$onVa;\n\n      (_props$editable3 = props.editable) === null || _props$editable3 === void 0 ? void 0 : (_props$editable3$onVa = _props$editable3.onValuesChange) === null || _props$editable3$onVa === void 0 ? void 0 : _props$editable3$onVa.call(_props$editable3, undefined, data);\n      action.setDataSource(data);\n    }\n  }));\n  /** ÁªëÂÆö action */\n\n  useActionType(actionRef, action, {\n    fullScreen: function fullScreen() {\n      var _counter$rootDomRef;\n\n      if (!((_counter$rootDomRef = counter.rootDomRef) === null || _counter$rootDomRef === void 0 ? void 0 : _counter$rootDomRef.current) || !document.fullscreenEnabled) {\n        return;\n      }\n\n      if (document.fullscreenElement) {\n        document.exitFullscreen();\n      } else {\n        var _counter$rootDomRef2;\n\n        (_counter$rootDomRef2 = counter.rootDomRef) === null || _counter$rootDomRef2 === void 0 ? void 0 : _counter$rootDomRef2.current.requestFullscreen();\n      }\n    },\n    onCleanSelected: function onCleanSelected() {\n      // Ê∏ÖÁ©∫ÈÄâ‰∏≠Ë°å\n      _onCleanSelected();\n    },\n    resetAll: function resetAll() {\n      var _formRef$current;\n\n      // Ê∏ÖÁ©∫ÈÄâ‰∏≠Ë°å\n      _onCleanSelected(); // Ê∏ÖÁ©∫Á≠õÈÄâ\n\n\n      setProFilter({}); // Ê∏ÖÁ©∫ÊéíÂ∫è\n\n      setProSort({}); // Ê∏ÖÁ©∫ toolbar ÊêúÁ¥¢\n\n      counter.setKeyWords(undefined); // ÈáçÁΩÆÈ°µÁ†Å\n\n      action.setPageInfo({\n        current: 1\n      }); // ÈáçÁΩÆË°®Âçï\n\n      formRef === null || formRef === void 0 ? void 0 : (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.resetFields();\n      setFormSearch({});\n    },\n    editableUtils: editableUtils\n  });\n\n  if (propsActionRef) {\n    // @ts-ignore\n    propsActionRef.current = actionRef.current;\n  } // ---------- ÂàóËÆ°ÁÆóÁõ∏ÂÖ≥ start  -----------------\n\n\n  var tableColumn = useMemo(function () {\n    var _props$expandable3;\n\n    return genProColumnToColumn({\n      columns: propsColumns,\n      counter: counter,\n      columnEmptyText: columnEmptyText,\n      type: type,\n      editableUtils: editableUtils,\n      rowKey: rowKey,\n      childrenColumnName: (_props$expandable3 = props.expandable) === null || _props$expandable3 === void 0 ? void 0 : _props$expandable3.childrenColumnName\n    }).sort(columnSort(counter.columnsMap)); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [propsColumns, counter === null || counter === void 0 ? void 0 : counter.sortKeyColumns, counter === null || counter === void 0 ? void 0 : counter.columnsMap, columnEmptyText, type, // eslint-disable-next-line react-hooks/exhaustive-deps\n  editableUtils.editableKeys && editableUtils.editableKeys.join(',')]);\n  /** Table Column ÂèòÂåñÁöÑÊó∂ÂÄôÊõ¥Êñ∞‰∏Ä‰∏ãÔºåËøô‰∏™ÂèÇÊï∞Â∞Ü‰ºöÁî®‰∫éÊ∏≤Êüì */\n\n  useDeepCompareEffectDebounce(function () {\n    if (tableColumn && tableColumn.length > 0) {\n      // ÈáçÊñ∞ÁîüÊàêkeyÁöÑÂ≠óÁ¨¶‰∏≤Áî®‰∫éÊéíÂ∫è\n      var columnKeys = tableColumn.map(function (item) {\n        return genColumnKey(item.key, item.index);\n      });\n      counter.setSortKeyColumns(columnKeys);\n    }\n  }, [tableColumn], ['render', 'renderFormItem'], 100);\n  /** ÂêåÊ≠• PaginationÔºåÊîØÊåÅÂèóÊéßÁöÑ È°µÁ†Å Âíå pageSize */\n\n  useDeepCompareEffect(function () {\n    var pageInfo = action.pageInfo;\n\n    var _ref4 = propsPagination || {},\n        _ref4$current = _ref4.current,\n        current = _ref4$current === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current : _ref4$current,\n        _ref4$pageSize = _ref4.pageSize,\n        pageSize = _ref4$pageSize === void 0 ? pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize : _ref4$pageSize;\n\n    if (propsPagination && (current || pageSize) && (pageSize !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.pageSize) || current !== (pageInfo === null || pageInfo === void 0 ? void 0 : pageInfo.current))) {\n      action.setPageInfo({\n        pageSize: pageSize || pageInfo.pageSize,\n        current: current || pageInfo.current\n      });\n    }\n  }, [propsPagination && propsPagination.pageSize, propsPagination && propsPagination.current]);\n  /** Ë°åÈÄâÊã©Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò */\n\n  var rowSelection = _objectSpread(_objectSpread({\n    selectedRowKeys: selectedRowKeys\n  }, propsRowSelection), {}, {\n    onChange: function onChange(keys, rows, info) {\n      if (propsRowSelection && propsRowSelection.onChange) {\n        propsRowSelection.onChange(keys, rows, info);\n      }\n\n      setSelectedRowsAndKey(keys, rows);\n    }\n  });\n  /** ÊòØ‰∏çÊòØ LightFilter, LightFilter Êúâ‰∏Ä‰∫õÁâπÊÆäÁöÑÂ§ÑÁêÜ */\n\n\n  var isLightFilter = search !== false && (search === null || search === void 0 ? void 0 : search.filterType) === 'light';\n\n  var _onFormSearchSubmit = function onFormSearchSubmit(values) {\n    // Âà§Êñ≠search.onSearchËøîÂõûÂÄºÂÜ≥ÂÆöÊòØÂê¶Êõ¥Êñ∞formSearch\n    if (options && options.search) {\n      var _options$search, _options$search$onSea;\n\n      var _ref5 = options.search === true ? {} : options.search,\n          _ref5$name = _ref5.name,\n          name = _ref5$name === void 0 ? 'keyword' : _ref5$name;\n      /** Â¶ÇÊûú‰º†ÂÖ•ÁöÑ onSearch ËøîÂõûÂÄº‰∏∫ falseÔºåÂàô‰∏çË¶ÅÊääoptions.search.nameÂØπÂ∫îÁöÑÂÄºsetÂà∞formSearch */\n\n\n      var success = (_options$search = options.search) === null || _options$search === void 0 ? void 0 : (_options$search$onSea = _options$search.onSearch) === null || _options$search$onSea === void 0 ? void 0 : _options$search$onSea.call(_options$search, counter.keyWords);\n\n      if (success !== false) {\n        setFormSearch(_objectSpread(_objectSpread({}, values), {}, _defineProperty({}, name, counter.keyWords)));\n        return;\n      }\n    }\n\n    setFormSearch(values);\n  };\n\n  var searchNode = search === false && type !== 'form' ? null : /*#__PURE__*/React.createElement(FormRender, {\n    pagination: pagination,\n    beforeSearchSubmit: beforeSearchSubmit,\n    action: actionRef,\n    columns: propsColumns,\n    onFormSearchSubmit: function onFormSearchSubmit(values) {\n      _onFormSearchSubmit(values);\n    },\n    ghost: ghost,\n    onReset: props.onReset,\n    onSubmit: props.onSubmit,\n    loading: !!action.loading,\n    manualRequest: manualRequest,\n    search: search,\n    form: props.form,\n    formRef: formRef,\n    type: props.type || 'table',\n    cardBordered: props.cardBordered,\n    dateFormatter: props.dateFormatter\n  });\n  /** ÂÜÖÁΩÆÁöÑÂ∑•ÂÖ∑Ê†è */\n\n  var toolbarDom = toolBarRender === false ? null : /*#__PURE__*/React.createElement(Toolbar, {\n    headerTitle: headerTitle,\n    hideToolbar: options === false && !headerTitle && !toolBarRender && !toolbar && !isLightFilter,\n    selectedRows: selectedRowsRef.current,\n    selectedRowKeys: selectedRowKeys,\n    tableColumn: tableColumn,\n    tooltip: tooltip,\n    toolbar: toolbar,\n    onFormSearchSubmit: function onFormSearchSubmit(newValues) {\n      setFormSearch(_objectSpread(_objectSpread({}, formSearch), newValues));\n    },\n    searchNode: isLightFilter ? searchNode : null,\n    options: options,\n    actionRef: actionRef,\n    toolBarRender: toolBarRender\n  });\n  /** ÂÜÖÁΩÆÁöÑÂ§öÈÄâÊìç‰ΩúÊ†è */\n\n  var alertDom = propsRowSelection !== false ? /*#__PURE__*/React.createElement(Alert, {\n    selectedRowKeys: selectedRowKeys,\n    selectedRows: selectedRowsRef.current,\n    onCleanSelected: _onCleanSelected,\n    alertOptionRender: rest.tableAlertOptionRender,\n    alertInfoRender: tableAlertRender,\n    alwaysShowAlert: propsRowSelection === null || propsRowSelection === void 0 ? void 0 : propsRowSelection.alwaysShowAlert\n  }) : null;\n  return /*#__PURE__*/React.createElement(TableRender, _extends({}, props, {\n    name: isEditorTable,\n    size: counter.tableSize,\n    onSizeChange: counter.setTableSize,\n    pagination: pagination,\n    searchNode: searchNode,\n    rowSelection: propsRowSelection !== false ? rowSelection : undefined,\n    className: className,\n    tableColumn: tableColumn,\n    isLightFilter: isLightFilter,\n    action: action,\n    alertDom: alertDom,\n    toolbarDom: toolbarDom,\n    onSortChange: setProSort,\n    onFilterChange: setProFilter,\n    editableUtils: editableUtils,\n    getRowKey: getRowKey\n  }));\n};\n/**\n * üèÜ Use Ant Design Table like a Pro! Êõ¥Âø´ Êõ¥Â•Ω Êõ¥Êñπ‰æø\n *\n * @param props\n */\n\n\nvar ProviderWarp = function ProviderWarp(props) {\n  var _useContext = useContext(_ConfigProvider.ConfigContext),\n      getPrefixCls = _useContext.getPrefixCls;\n\n  var ErrorComponent = props.ErrorBoundary === false ? React.Fragment : props.ErrorBoundary || ErrorBoundary;\n  return /*#__PURE__*/React.createElement(Container.Provider, {\n    initialState: props\n  }, /*#__PURE__*/React.createElement(ConfigProviderWrap, null, /*#__PURE__*/React.createElement(ErrorComponent, null, /*#__PURE__*/React.createElement(ProTable, _extends({\n    defaultClassName: getPrefixCls('pro-table')\n  }, props)))));\n};\n\nProviderWarp.Summary = _Table.Summary;\nexport default ProviderWarp;"]},"metadata":{},"sourceType":"module"}